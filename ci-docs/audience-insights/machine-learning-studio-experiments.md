---
title: Machine Learning Studio (klasikoa) zerbitzuaren esperimentuak
description: 'Erabili Machine Learning Studio (klasikoa) zerbitzuko ereduak hemen: Dynamics 365 Customer Insights.'
ms.date: 12/03/2020
ms.service: customer-insights
ms.subservice: audience-insights
ms.topic: conceptual
author: m-hartmann
ms.author: mhart
ms.reviewer: ameetj
manager: shellyha
ms.openlocfilehash: 556b6810db0ed2733a3f086291757bd85b77e371
ms.sourcegitcommit: a9b2cf598f256d07a48bba8617347ee90024a1dd
ms.translationtype: HT
ms.contentlocale: eu-ES
ms.lasthandoff: 12/03/2020
ms.locfileid: "4669003"
---
# <a name="use-models-based-on-azure-machine-learning-studio-classic"></a><span data-ttu-id="75e86-103">Erabili Azure Machine Learning Studio (klasikoa) zerbitzuan oinarritutako ereduak</span><span class="sxs-lookup"><span data-stu-id="75e86-103">Use models based on Azure Machine Learning Studio (classic)</span></span>

<span data-ttu-id="75e86-104">Dynamics 365 Customer Insights-eko datu bateratuak negozioaren ikuspegi osagarriak sor ditzaketen ikaskuntza automatiko ereduak eraikitzeko iturria da.</span><span class="sxs-lookup"><span data-stu-id="75e86-104">The unified data in Dynamics 365 Customer Insights is a source for building machine learning models that can generate additional business insights.</span></span> <span data-ttu-id="75e86-105">Customer Insights Machine Learning Studio-rekin (klasikoa) integratzen da zure eredu pertsonalizatuak erabiltzeko.</span><span class="sxs-lookup"><span data-stu-id="75e86-105">Customer Insights integrates with Machine Learning Studio (classic) to use your own custom models.</span></span> <span data-ttu-id="75e86-106">Azure Machine Learning-en garatutako ereduak Customer Insights-ekin nola integratzen diren ikusteko, ikusi [Azure Machine Learning-eko esperimentuak](azure-machine-learning-experiments.md).</span><span class="sxs-lookup"><span data-stu-id="75e86-106">To see how models developed in Azure Machine Learning are integrated with Customer Insights, see [Azure Machine Learning experiments](azure-machine-learning-experiments.md).</span></span>

## <a name="prerequisites"></a><span data-ttu-id="75e86-107">Aurrebaldintzak</span><span class="sxs-lookup"><span data-stu-id="75e86-107">Prerequisites</span></span>

- <span data-ttu-id="75e86-108">Sartu Customer Insights-era</span><span class="sxs-lookup"><span data-stu-id="75e86-108">Access to Customer Insights</span></span>
- <span data-ttu-id="75e86-109">Aktibatu Azure Enterprise harpidetza</span><span class="sxs-lookup"><span data-stu-id="75e86-109">Active Azure Enterprise subscription</span></span>
- [<span data-ttu-id="75e86-110">Bezeroen profil bateratuak</span><span class="sxs-lookup"><span data-stu-id="75e86-110">Unified customer profiles</span></span>](data-unification.md)
- <span data-ttu-id="75e86-111">[Erakundeak Azure Blob biltegira esportatzea](export-azure-blob-storage.md) konfiguratu</span><span class="sxs-lookup"><span data-stu-id="75e86-111">[Entity export to Azure Blob storage](export-azure-blob-storage.md) set up</span></span>

## <a name="set-up-machine-learning-studio-classic"></a><span data-ttu-id="75e86-112">Konfiguratu Machine Learning Studio (klasikoa)</span><span class="sxs-lookup"><span data-stu-id="75e86-112">Set up Machine Learning Studio Classic</span></span>

<span data-ttu-id="75e86-113">Lehen urrats batean, Machine Learning Studio-ko (klasikoa) laneko area sortu behar dugu eta zerbitzua ireki.</span><span class="sxs-lookup"><span data-stu-id="75e86-113">In a first step, we need to create a workspace for and open the Machine Learning Studio (classic).</span></span>

1. <span data-ttu-id="75e86-114">Joan[https://www.portal.azure.com](https://www.portal.azure.com/) eta hasi saioa.</span><span class="sxs-lookup"><span data-stu-id="75e86-114">Go to [https://www.portal.azure.com](https://www.portal.azure.com/) and sign in.</span></span>

1. <span data-ttu-id="75e86-115">Hautatu **Sortu baliabidea**.</span><span class="sxs-lookup"><span data-stu-id="75e86-115">Select **Create a resource**.</span></span>

1. <span data-ttu-id="75e86-116">Bilatu **Ikaskuntza automatiko Studio lan-eremua** eta hautatu **Sortu**.</span><span class="sxs-lookup"><span data-stu-id="75e86-116">Search **Machine Learning Studio Workspace** and select **Create**.</span></span>

1. <span data-ttu-id="75e86-117">Idatzi beharrezko xehetasunak honetara [sortu lan-eremua](https://docs.microsoft.com/azure/machine-learning/studio/create-workspace).</span><span class="sxs-lookup"><span data-stu-id="75e86-117">Enter the required details to [create the workspace](https://docs.microsoft.com/azure/machine-learning/studio/create-workspace).</span></span> <span data-ttu-id="75e86-118">Aukeratu **Web zerbitzuen planaren prezioen maila** inportatzeko asmoa duzun datu kopuruaren arabera.</span><span class="sxs-lookup"><span data-stu-id="75e86-118">Choose the **Web service plan pricing tier** based on the amount of data you plan to import.</span></span> <span data-ttu-id="75e86-119">Errendimendu onena lortzeko, hautatu geografikoki hurbilen dagoen **kokalekua**.</span><span class="sxs-lookup"><span data-stu-id="75e86-119">For best performance, select the **Location** that is geographically closest to you.</span></span>

1. <span data-ttu-id="75e86-120">Baliabidea sortu ondoren, Ikaskuntza automatiko Studio laneko espazioen panela agertuko da.</span><span class="sxs-lookup"><span data-stu-id="75e86-120">After creating the resource, the Machine Learning Studio workspace dashboard will appear.</span></span> <span data-ttu-id="75e86-121">Aukeratu **Ikaskuntza automatiko Studio abiarazi**.</span><span class="sxs-lookup"><span data-stu-id="75e86-121">Select **Launch Machine Learning Studio**.</span></span>

   ![Azure Ikaskuntza automatiko Studio erabiltzailearen interfazea](media/azure-machine-learning-studio.png)

## <a name="work-with-azure-machine-learning-studio"></a><span data-ttu-id="75e86-123">Lan egin Azure Machine Learning Studio</span><span class="sxs-lookup"><span data-stu-id="75e86-123">Work with Azure Machine Learning Studio</span></span>

<span data-ttu-id="75e86-124">Esperimentu berri bat sor dezakezu edo lehendik dagoen esperimentu txantiloia inportatu lagin galeriatik.</span><span class="sxs-lookup"><span data-stu-id="75e86-124">You can now create a new experiment, or import an existing experiment template from the sample gallery.</span></span> <span data-ttu-id="75e86-125">Hiru agertoki estandarretarako lagin esperimentuak daude:</span><span class="sxs-lookup"><span data-stu-id="75e86-125">There are sample experiments for three standard scenarios:</span></span>

- [<span data-ttu-id="75e86-126">Churn iragarpen</span><span class="sxs-lookup"><span data-stu-id="75e86-126">Churn prediction</span></span>](#churn-analysis)

- [<span data-ttu-id="75e86-127">Bezeroaren balio osoa</span><span class="sxs-lookup"><span data-stu-id="75e86-127">Customer lifetime value</span></span>](#customer-lifetime-value-prediction)

- [<span data-ttu-id="75e86-128">Produktuaren gomendioa edo hurrengo ekintza onena</span><span class="sxs-lookup"><span data-stu-id="75e86-128">Product recommendation or next best action</span></span>](#productrecommendation-or-next-best-action)

1. <span data-ttu-id="75e86-129">Esperimentu berria sortu edo esperimentuen txantiloia erabiltzen baduzu galeriatik, konfiguratu behar duzu **Inportatu datuak** propietate.</span><span class="sxs-lookup"><span data-stu-id="75e86-129">If you create a new experiment or use an experiment template from the gallery, you need to configure the **Import Data** properties.</span></span> <span data-ttu-id="75e86-130">Erabili esperientzia gidatua edo eman zuzenean xehetasunak zure datuak dituen Azure blob biltegira sartzeko.</span><span class="sxs-lookup"><span data-stu-id="75e86-130">Use the guided experience or directly provide details to access the Azure Blob Storage that contains your data.</span></span>  

   ![Azure Machine Learning Studio esperimentua](media/azure-machine-learning-studio-experiment.png)

1. <span data-ttu-id="75e86-132">Orain, prozesatzeko neurrira egindako hoditeria eraiki dezakezu datuak garbitu eta aurreprozesatzeko, funtzioak ateratzeko eta eredu egokia prestatzeko.</span><span class="sxs-lookup"><span data-stu-id="75e86-132">Now you can build a custom processing pipeline to clean and preprocess the data, extract features, and train a suitable model.</span></span>

1. <span data-ttu-id="75e86-133">Modeloaren errendimendua probatu eta optimizatu.</span><span class="sxs-lookup"><span data-stu-id="75e86-133">Test and optimize the model performance.</span></span>

1. <span data-ttu-id="75e86-134">Eredu baten kalitatearekin konforme zaudenean, hautatu **Ezarri web zerbitzua** > **Aurreikusitako web zerbitzua**.</span><span class="sxs-lookup"><span data-stu-id="75e86-134">When you’re satisfied with the quality of a model, select **Set up web service** > **Predictive Web Service**.</span></span> <span data-ttu-id="75e86-135">Aukera honek prestatutako esperientziatik prestatutako eredua eta featutazio-hodiak inportatzen ditu iragarpen zerbitzu batera.</span><span class="sxs-lookup"><span data-stu-id="75e86-135">This option imports the trained model and the featurization pipeline from the training experiment to a predictive service.</span></span> <span data-ttu-id="75e86-136">Iragarpen zerbitzuak beste datu multzo bat har dezake prestakuntza esperimentuan erabilitako eskemarekin, iragarpenak egiteko.</span><span class="sxs-lookup"><span data-stu-id="75e86-136">The predictive service can take another set of input data with the schema used in the training experiment to make predictions.</span></span>

   ![Ezarri web zerbitzu iragargarria](media/predictive-webservice-control.png)

1. <span data-ttu-id="75e86-138">Aurreikusitako web zerbitzuen esperimentua arrakastatsua izan ondoren, auto planifikaziorako erabil dezakezu.</span><span class="sxs-lookup"><span data-stu-id="75e86-138">Once the predictive web service experiment is successful, you can deploy it for auto scheduling.</span></span> <span data-ttu-id="75e86-139">Web zerbitzua Customer Insights zerbitzuarekin lan egiteko, hautatu **Ezarri web zerbitzua** > **Ezarri Web Zerbitzua [Berria] Aurrebista**.</span><span class="sxs-lookup"><span data-stu-id="75e86-139">To have the web service work with Customer Insights, select **Deploy Web Service** > **Deploy Web Service [New] Preview**.</span></span> <span data-ttu-id="75e86-140">[Ikasi gehiago web-zerbitzu bat inplementatzearen inguruan](https://docs.microsoft.com/azure/machine-learning/studio/deploy-a-machine-learning-web-service).</span><span class="sxs-lookup"><span data-stu-id="75e86-140">[Learn more about deploying a web service](https://docs.microsoft.com/azure/machine-learning/studio/deploy-a-machine-learning-web-service).</span></span>

   ![Inplementatu web zerbitzu iragargarria](media/predictive-webservice-deploy.png)

## <a name="sample-models-from-the-gallery"></a><span data-ttu-id="75e86-142">Galeriako eredu ereduak</span><span class="sxs-lookup"><span data-stu-id="75e86-142">Sample models from the gallery</span></span>

<span data-ttu-id="75e86-143">Artikulu honetako modeloetarako Contoso Hotelaren fikziozko eszenatokia erabiliko dugu.</span><span class="sxs-lookup"><span data-stu-id="75e86-143">We'll use a fictitious scenario of Contoso Hotel for the models in this article.</span></span> <span data-ttu-id="75e86-144">Contoso Hotelak datu hauek biltzen ditu:</span><span class="sxs-lookup"><span data-stu-id="75e86-144">Contoso Hotel gathers the following data:</span></span>

- <span data-ttu-id="75e86-145">Hotel-egonaldiaren jardueraz osatutako CRM datuak.</span><span class="sxs-lookup"><span data-stu-id="75e86-145">CRM data consisting of hotel stay activity.</span></span> <span data-ttu-id="75e86-146">Datu multzoak erregistratutako bezero bakoitzeko egonaldien daten inguruko informazioa biltzen du.</span><span class="sxs-lookup"><span data-stu-id="75e86-146">The data set includes information about the dates of stay for each registered customer.</span></span> <span data-ttu-id="75e86-147">Erreserba, gela motak, gastuaren xehetasunak eta abar buruzko informazioa ere ematen ditu.</span><span class="sxs-lookup"><span data-stu-id="75e86-147">It also contains information about the booking, room types, details of spend, and so on.</span></span> <span data-ttu-id="75e86-148">Datuek lau urte irauten dute, 2014ko urtarriletik 2018ko urtarrila.</span><span class="sxs-lookup"><span data-stu-id="75e86-148">The data spans four years, from January 2014 to January 2018.</span></span>
- <span data-ttu-id="75e86-149">Hoteleko bezeroen bezeroen profilak.</span><span class="sxs-lookup"><span data-stu-id="75e86-149">Customer profiles of hotel guests.</span></span> <span data-ttu-id="75e86-150">Profil hauek bezero bakoitzari buruzko informazioa biltzen dute, horien izena, jaioteguna, posta helbidea, generoa eta telefono zenbakia.</span><span class="sxs-lookup"><span data-stu-id="75e86-150">These profiles contain information about each customer, including their name, birthdate, postal address, gender, and phone number.</span></span>
- <span data-ttu-id="75e86-151">Hotelak eskaintzen dituen zerbitzuen erabilera, esaterako, bainuetxea, garbitegia, WiFi edo mezularitza.</span><span class="sxs-lookup"><span data-stu-id="75e86-151">Usage of services offered by the hotel, such as the spa, laundry, WiFi, or courier.</span></span> <span data-ttu-id="75e86-152">Informazio hau erregistratutako bezero bakoitzerako erregistratzen da.</span><span class="sxs-lookup"><span data-stu-id="75e86-152">This information is logged for each registered customer.</span></span> <span data-ttu-id="75e86-153">Normalean, zerbitzuen erabilera egonaldiarekin lotuta dago.</span><span class="sxs-lookup"><span data-stu-id="75e86-153">Typically, use of services is linked with the stay.</span></span> <span data-ttu-id="75e86-154">Zenbait kasutan, bezeroek hotelean egon gabe erabil ditzakete zerbitzuak.</span><span class="sxs-lookup"><span data-stu-id="75e86-154">In some cases, services can be used by customers without staying in the hotel.</span></span>

## <a name="churn-analysis"></a><span data-ttu-id="75e86-155">Churn azterketa</span><span class="sxs-lookup"><span data-stu-id="75e86-155">Churn Analysis</span></span>

<span data-ttu-id="75e86-156">Churn analisia negozio arlo desberdinetan aplikatzen da.</span><span class="sxs-lookup"><span data-stu-id="75e86-156">Churn analysis applies to different business areas.</span></span> <span data-ttu-id="75e86-157">Adibide honetan, zerbitzuen galera-tasa aztertuko dugu, batez ere hotelen zerbitzuen testuinguruan, lehen azaldu bezala.</span><span class="sxs-lookup"><span data-stu-id="75e86-157">In this example, we’re going to look at service churn, specifically in the context of hotel services as described above.</span></span> <span data-ttu-id="75e86-158">Bukaerako muturreko bideratze eredu baten lanaren adibidea eskaintzen du. Beste edozein ereduaren bideratzea edozein galera-tasaren ereduren abiapuntu gisa erabil daiteke.</span><span class="sxs-lookup"><span data-stu-id="75e86-158">It provides a working example of an end–to–end model pipeline that can be used as a starting point for any other type of churn model.</span></span>

### <a name="definition-of-churn"></a><span data-ttu-id="75e86-159">Churn definizioa</span><span class="sxs-lookup"><span data-stu-id="75e86-159">Definition of Churn</span></span>

<span data-ttu-id="75e86-160">Churn definizioa eszenatokiaren arabera alda daiteke.</span><span class="sxs-lookup"><span data-stu-id="75e86-160">The definition of churn can differ based on the scenario.</span></span> <span data-ttu-id="75e86-161">Adibide honetan, azken urtean hotela bisitatu ez duen gonbidatu bat galdutzat etiketatuta egon beharko litzateke.</span><span class="sxs-lookup"><span data-stu-id="75e86-161">In this example, a guest who hasn’t visited the hotel in the past year should be labeled as churned.</span></span>  

<span data-ttu-id="75e86-162">Esperimentuaren txantiloia galeriatik inportatu daiteke.</span><span class="sxs-lookup"><span data-stu-id="75e86-162">The experiment template can be imported from the gallery.</span></span> <span data-ttu-id="75e86-163">Lehenik eta behin, ziurtatu datuak inportatzen dituzula **Hotel Ostatu Jarduera**, **Bezeroaren datuak**, eta **Zerbitzuaren erabilera datuak** Azure Blob biltegitik.</span><span class="sxs-lookup"><span data-stu-id="75e86-163">First, ensure that you import the data for **Hotel Stay Activity**, **Customer data**, and **Service Usage Data** from Azure Blob storage.</span></span>

   ![Inportatu datuak Churn ereduari dagokionez](media/import-data-azure-blob-storage.png)

### <a name="featurization"></a><span data-ttu-id="75e86-165">Eginbideak egin</span><span class="sxs-lookup"><span data-stu-id="75e86-165">Featurization</span></span>

<span data-ttu-id="75e86-166">Galera-tasaren definizioa oinarritzat hartuta, etiketan eragina izango duten ezaugarri gordinak identifikatzen ditugu lehenik.</span><span class="sxs-lookup"><span data-stu-id="75e86-166">Based on the definition of churn, we first identify the raw features that will influence the label.</span></span> <span data-ttu-id="75e86-167">Ondoren, ezaugarri gordin hauek Ikaskuntza automatiko ereduekin erabil daitezkeen zenbakizko funtzioetan prozesatzen ditugu.</span><span class="sxs-lookup"><span data-stu-id="75e86-167">Then, we process these raw features into numerical features that can be used with machine learning models.</span></span> <span data-ttu-id="75e86-168">Datuen integrazioa Customer Insights-en gertatzen da, beraz, taula hauek konbina ditzakegu *Bezeroaren IDa* erabiliz.</span><span class="sxs-lookup"><span data-stu-id="75e86-168">Data integration happens in Customer Insights so we can join these tables by using the *Customer ID*.</span></span>

   ![Sartu inportatutako datuak](media/join-imported-data.png)

<span data-ttu-id="75e86-170">Galera-tasaren analisia egiteko ereduaren sorrera zaila izan daiteke.</span><span class="sxs-lookup"><span data-stu-id="75e86-170">The featurization for building the model for churn analysis can be a little tricky.</span></span> <span data-ttu-id="75e86-171">Datuak denboraren funtzio bat dira egunero egiten diren hotel jarduera berriekin.</span><span class="sxs-lookup"><span data-stu-id="75e86-171">The data is a function of time with new hotel activity recorded on daily basis.</span></span> <span data-ttu-id="75e86-172">Featizazio garaian, datu dinamikotik ezaugarri estatikoak sortu nahi ditugu.</span><span class="sxs-lookup"><span data-stu-id="75e86-172">During featurization, we want to generate static features from the dynamic data.</span></span> <span data-ttu-id="75e86-173">Kasu honetan, hoteleko jardueratik ezaugarri ugari sortzen ditugu urtebeteko leiho labainkorrekin.</span><span class="sxs-lookup"><span data-stu-id="75e86-173">In this case, we generate multiple features from hotel activity with a sliding window of one year.</span></span> <span data-ttu-id="75e86-174">Gela mota edo erreserba mota bezalako ezaugarri kategoriak ere bereizten ditugu, kodetze beroa erabiliz.</span><span class="sxs-lookup"><span data-stu-id="75e86-174">We also expand the categorical features like room type or booking type into separate features using one-hot encoding.</span></span>  

<span data-ttu-id="75e86-175">Ezaugarrien behin betiko zerrenda:</span><span class="sxs-lookup"><span data-stu-id="75e86-175">Final list of features:</span></span>

| <span data-ttu-id="75e86-176">**Zenbakia**</span><span class="sxs-lookup"><span data-stu-id="75e86-176">**Number**</span></span>  | <span data-ttu-id="75e86-177">**jatorrizko_zutabea**</span><span class="sxs-lookup"><span data-stu-id="75e86-177">**Original_Column**</span></span>          | <span data-ttu-id="75e86-178">**Eratorritako Ezaugarriak**</span><span class="sxs-lookup"><span data-stu-id="75e86-178">**Derived Features**</span></span>                                                                                                                      |
|-------------|------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="75e86-179">1</span><span class="sxs-lookup"><span data-stu-id="75e86-179">1</span></span>           | <span data-ttu-id="75e86-180">Gela mota</span><span class="sxs-lookup"><span data-stu-id="75e86-180">Room Type</span></span>                    | <span data-ttu-id="75e86-181">RoomTypeLargeCount, RoomTypeSmallCount</span><span class="sxs-lookup"><span data-stu-id="75e86-181">RoomTypeLargeCount, RoomTypeSmallCount</span></span>                                                                                                    |
| <span data-ttu-id="75e86-182">2</span><span class="sxs-lookup"><span data-stu-id="75e86-182">2</span></span>           | <span data-ttu-id="75e86-183">Erreserba mota</span><span class="sxs-lookup"><span data-stu-id="75e86-183">Booking Type</span></span>                 | <span data-ttu-id="75e86-184">BookingTypeOnlineCount, BookingTypePhoneCallCount</span><span class="sxs-lookup"><span data-stu-id="75e86-184">BookingTypeOnlineCount, BookingTypePhoneCallCount</span></span>                                                                                         |
| <span data-ttu-id="75e86-185">3</span><span class="sxs-lookup"><span data-stu-id="75e86-185">3</span></span>           | <span data-ttu-id="75e86-186">Bidaia Kategoria</span><span class="sxs-lookup"><span data-stu-id="75e86-186">Travel Category</span></span>              | <span data-ttu-id="75e86-187">TravelCategoryBusinessCount, TravelCategoryLeisureCount</span><span class="sxs-lookup"><span data-stu-id="75e86-187">TravelCategoryBusinessCount, TravelCategoryLeisureCount</span></span>                                                                                   |
| <span data-ttu-id="75e86-188">4</span><span class="sxs-lookup"><span data-stu-id="75e86-188">4</span></span>           | <span data-ttu-id="75e86-189">Dolarrak gastatu</span><span class="sxs-lookup"><span data-stu-id="75e86-189">Dollars Spent</span></span>                | <span data-ttu-id="75e86-190">TotalDollarSpent</span><span class="sxs-lookup"><span data-stu-id="75e86-190">TotalDollarSpent</span></span>                                                                                                                          |
| <span data-ttu-id="75e86-191">5</span><span class="sxs-lookup"><span data-stu-id="75e86-191">5</span></span>           | <span data-ttu-id="75e86-192">Sarrera eta Ordainketen datak</span><span class="sxs-lookup"><span data-stu-id="75e86-192">Check-in and Checkout dates</span></span>  | <span data-ttu-id="75e86-193">StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016.</span><span class="sxs-lookup"><span data-stu-id="75e86-193">StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016.</span></span> <span data-ttu-id="75e86-194">StayCount2015, StayCount2014</span><span class="sxs-lookup"><span data-stu-id="75e86-194">StayCount2015, StayCount2014</span></span>                |
| <span data-ttu-id="75e86-195">6</span><span class="sxs-lookup"><span data-stu-id="75e86-195">6</span></span>           | <span data-ttu-id="75e86-196">Zerbitzuaren erabilpena</span><span class="sxs-lookup"><span data-stu-id="75e86-196">Service Usage</span></span>                | <span data-ttu-id="75e86-197">UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage</span><span class="sxs-lookup"><span data-stu-id="75e86-197">UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage</span></span>  |

### <a name="model-selection"></a><span data-ttu-id="75e86-198">Ereduen hautapena</span><span class="sxs-lookup"><span data-stu-id="75e86-198">Model selection</span></span>

<span data-ttu-id="75e86-199">Orain erabili beharreko algoritmo egokiena aukeratu behar dugu.</span><span class="sxs-lookup"><span data-stu-id="75e86-199">Now we need to choose the optimal algorithm to use.</span></span> <span data-ttu-id="75e86-200">Kasu honetan, ezaugarri gehienak ezaugarri kategorietan oinarritzen dira.</span><span class="sxs-lookup"><span data-stu-id="75e86-200">In this case, most features are based on categorical features.</span></span> <span data-ttu-id="75e86-201">Normalean, erabaki zuhaitzetan oinarritutako ereduak ondo funtzionatzen dute.</span><span class="sxs-lookup"><span data-stu-id="75e86-201">Typically, decision tree–based models work well.</span></span> <span data-ttu-id="75e86-202">Zenbakizko ezaugarriak soilik badaude, sare neuronalak aukera hobea izan liteke.</span><span class="sxs-lookup"><span data-stu-id="75e86-202">If there are only numerical features, neural networks could be a better choice.</span></span> <span data-ttu-id="75e86-203">Laguntza bektore makina (SVM) ere hautagai ona da horrelako egoeretan; hala ere, sintonia pixka bat behar du errendimendu onena ateratzeko.</span><span class="sxs-lookup"><span data-stu-id="75e86-203">Support vector machine (SVM) also is a good candidate in such situations; however, it needs quite a bit of tuning to extract the best performance.</span></span> <span data-ttu-id="75e86-204">Aukeratzen dugu **Bi klasez bultzatutako erabaki zuhaitza** lehen eredu gisa eta ondoren **Bi klaseko SVM** bigarren eredu gisa.</span><span class="sxs-lookup"><span data-stu-id="75e86-204">We choose **Two-Class Boosted Decision Tree** as the first model of choice followed by **Two-Class SVM** as the second model.</span></span> <span data-ttu-id="75e86-205">Azure Machine Learning Studio-k A / B probak egiteko aukera ematen dizu, beraz, onuragarria da bi ereduekin hastea.</span><span class="sxs-lookup"><span data-stu-id="75e86-205">Azure Machine Learning Studio lets you do A/B testing, so it’s beneficial to start with two models rather than one.</span></span>

<span data-ttu-id="75e86-206">Hurrengo irudian Azure Ikaskuntza automatiko Studio-ren ereduaren prestakuntza eta ebaluazio hoditeria erakusten dira:</span><span class="sxs-lookup"><span data-stu-id="75e86-206">The following image shows the model training and evaluation pipeline from Azure Machine Learning Studio:</span></span>

![Churn eredua Azure Machine Learning Studio-n](media/azure-machine-learning-model.png)

<span data-ttu-id="75e86-208">**Permutazioaren ezaugarrien garrantzia** izeneko teknika ere aplikatzen dugu, ereduen optimizazioaren alderdi garrantzitsua.</span><span class="sxs-lookup"><span data-stu-id="75e86-208">We also apply a technique called **Permutation Feature Importance**, an important aspect of model optimization.</span></span> <span data-ttu-id="75e86-209">Eraikitako modeloek ez dute ezer zehatzik inolako ezaugarri zehatzek azken iragarpen-en duten eraginaren inguruan.</span><span class="sxs-lookup"><span data-stu-id="75e86-209">Built-in models have little to no insight into the impact of any specific feature on the final prediction.</span></span> <span data-ttu-id="75e86-210">Funtzioen garrantziaren kalkulagailuak algoritmo pertsonalizatua erabiltzen du eredu zehatz baten emaitzetan banakako ezaugarrien eragina kalkulatzeko.</span><span class="sxs-lookup"><span data-stu-id="75e86-210">The feature importance calculator uses a custom algorithm to compute the influence of individual features on the outcome for a specific model.</span></span> <span data-ttu-id="75e86-211">Funtzioen garrantzia +1 eta -1 artean normalizatzen da.</span><span class="sxs-lookup"><span data-stu-id="75e86-211">The feature importance is normalized between +1 to -1.</span></span> <span data-ttu-id="75e86-212">Eragin negatiboarekin, kasuan kasuko funtzioak emaitzaren gaineko eragin intuitiboa du eta eredutik kendu beharko litzateke.</span><span class="sxs-lookup"><span data-stu-id="75e86-212">A negative influence means the corresponding feature has counter-intuitive influence on the outcome and should be removed from the model.</span></span> <span data-ttu-id="75e86-213">Eragin positiboak adierazten du funtzioak asko laguntzen duela iragarpen.</span><span class="sxs-lookup"><span data-stu-id="75e86-213">A positive influence indicates the feature is contributing heavily towards the prediction.</span></span> <span data-ttu-id="75e86-214">Balio hauek ez dira korrelazio koefizienteak neurri desberdinak direlako.</span><span class="sxs-lookup"><span data-stu-id="75e86-214">These values aren't correlation coefficients as they are different metrics.</span></span> <span data-ttu-id="75e86-215">Informazio gehiago lortzeko, ikus [Permutazioaren ezaugarrien garrantzia](https://docs.microsoft.com/azure/machine-learning/studio-module-reference/permutation-feature-importance).</span><span class="sxs-lookup"><span data-stu-id="75e86-215">For more information, see [Permutation Feature Importance](https://docs.microsoft.com/azure/machine-learning/studio-module-reference/permutation-feature-importance).</span></span>

<span data-ttu-id="75e86-216">[Galera-tasaren esperimentu osoa Azure AI galerian eskuragarri dago](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).</span><span class="sxs-lookup"><span data-stu-id="75e86-216">The entire [churn experiment is available in the Azure AI Gallery](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).</span></span>

## <a name="customer-lifetime-value-prediction"></a><span data-ttu-id="75e86-217">Bezeroaren balio osoaren iragarpena</span><span class="sxs-lookup"><span data-stu-id="75e86-217">Customer lifetime value prediction</span></span>

<span data-ttu-id="75e86-218">Bezeroen bizi-iraupenaren balioaren (CLTV) kalkulua negozio batek bezeroak ebaluatu eta segmentatzeko erabil dezakeen funtsezko neurrietako bat da.</span><span class="sxs-lookup"><span data-stu-id="75e86-218">The customer lifetime value (CLTV) calculation is one of the key metrics that a business can use to assess and segment its customers.</span></span> <span data-ttu-id="75e86-219">Ostalaritza negozioarentzat, kritikoa da haien bezeroak ezagutzea.</span><span class="sxs-lookup"><span data-stu-id="75e86-219">For the hotel business, it’s critical to know their customers.</span></span> <span data-ttu-id="75e86-220">Adibidez, bezero onak osatzen dituzten faktoreak ulertzea informazio garrantzitsua da.</span><span class="sxs-lookup"><span data-stu-id="75e86-220">For example, understanding factors that make up good customers is crucial information.</span></span> <span data-ttu-id="75e86-221">Hoteleko zuzendaritzak bezeroaren ordainketa altuak asetzeko eta zein hobekuntza bideratu behar dituzten baloratzen laguntzen du.</span><span class="sxs-lookup"><span data-stu-id="75e86-221">It helps the hotel management assess which features they need to focus on and improve to satisfy their high paying customers.</span></span> <span data-ttu-id="75e86-222">Erabaki horiek eragin zuzena izan dezakete salmentetan eta irabazietan.</span><span class="sxs-lookup"><span data-stu-id="75e86-222">These decisions can have a direct impact on sales and earnings.</span></span>  

### <a name="definition-of-cltv"></a><span data-ttu-id="75e86-223">CLTV-ren definizioa</span><span class="sxs-lookup"><span data-stu-id="75e86-223">Definition of CLTV</span></span>

<span data-ttu-id="75e86-224">Adibide gisa, bezero baten CLTVa definitzen dugu bezeroak hurrengo 365 egunetan gastatuko duen zenbatekoarekin.</span><span class="sxs-lookup"><span data-stu-id="75e86-224">For this example, we define the CLTV of a customer as the total dollar amount the customer is expected to spend in the next 365 days.</span></span> <span data-ttu-id="75e86-225">Azken hiru urteetako datuak erabiliko ditugu bezero guztiek balio hori aurreikusteko.</span><span class="sxs-lookup"><span data-stu-id="75e86-225">We are going to use the past three years’ worth of data for all customers to predict this value.</span></span>

### <a name="featurization"></a><span data-ttu-id="75e86-226">Eginbideak egin</span><span class="sxs-lookup"><span data-stu-id="75e86-226">Featurization</span></span>

<span data-ttu-id="75e86-227">Kasu honetan, featización ez da nahiko egoeraren antzekoa izango.</span><span class="sxs-lookup"><span data-stu-id="75e86-227">In this case, featurization is going to be quite like the churn scenario.</span></span> <span data-ttu-id="75e86-228">Hala ere, etiketak eta aurreikusitako balioak goian zehaztutakoa baino ez dira.</span><span class="sxs-lookup"><span data-stu-id="75e86-228">However, the labels and predicted values are different than defined above.</span></span>

### <a name="model-selection"></a><span data-ttu-id="75e86-229">Ereduen hautapena</span><span class="sxs-lookup"><span data-stu-id="75e86-229">Model selection</span></span>

<span data-ttu-id="75e86-230">CLTV aurreikustea erregresio arazoa da, aurreikusitako balioa etengabeko balio aldagai positiboa baita.</span><span class="sxs-lookup"><span data-stu-id="75e86-230">Predicting the CLTV is a regression problem as the predicted value is a positive valued continuous variable.</span></span> <span data-ttu-id="75e86-231">Ezaugarrien propietateak kontuan hartuta, hautatzen dugu **erabakiaren zuhaitzaren erregresioa areagotu zuen** algoritmo gisa eta **sare neutralen erregresioa** eredua entrenatzeko beste algoritmo gisa.</span><span class="sxs-lookup"><span data-stu-id="75e86-231">Based on the feature properties, we select **Boosted Decision Tree Regression** as one algorithm and **Neural Network Regression** as another algorithm to train the model.</span></span>

## <a name="product-recommendation-or-next-best-action"></a><span data-ttu-id="75e86-232">Produktuaren gomendioa edo hurrengo ekintza onena</span><span class="sxs-lookup"><span data-stu-id="75e86-232">Product recommendation or Next Best Action</span></span>

<span data-ttu-id="75e86-233">Hotelaren agertoki batean produktuaren gomendioa hotelak bezeroei eskaintzen dizkien zerbitzuak gomendatzera interpretatzen da.</span><span class="sxs-lookup"><span data-stu-id="75e86-233">Product recommendation in a hotel scenario is interpreted as recommending services offered by the hotel to the customers.</span></span> <span data-ttu-id="75e86-234">Helburua bezeroei zerbitzu egokiak aukeratzea da, haien erabilera ahalik eta gehien aprobetxatzeko.</span><span class="sxs-lookup"><span data-stu-id="75e86-234">The objective is to choose the appropriate services for customers so that their usage is maximized.</span></span> <span data-ttu-id="75e86-235">Bideo bidezko streaming zerbitzua duten erabiltzaileentzako gomendioen antzekoa da.</span><span class="sxs-lookup"><span data-stu-id="75e86-235">It’s similar to movie recommendations for video streaming service users.</span></span>

### <a name="definition-of-product-recommendation-or-next-best-action"></a><span data-ttu-id="75e86-236">Produktu-gomendioa edo hurrengo ekintza onenaren definizioa</span><span class="sxs-lookup"><span data-stu-id="75e86-236">Definition of Product Recommendation or Next Best Action</span></span>

<span data-ttu-id="75e86-237">Helburua zerbitzuaren erabileraren dolarraren zenbatekoa maximizatzea bezala definitzen dugu, hoteleko bezeroei zerbitzu egokienak eskainiz beren interesaren arabera.</span><span class="sxs-lookup"><span data-stu-id="75e86-237">We define the goal as maximizing the dollar amount of service usage by offering the best matching services to hotel customers according to their interest.</span></span>

### <a name="featurization"></a><span data-ttu-id="75e86-238">Eginbideak egitea</span><span class="sxs-lookup"><span data-stu-id="75e86-238">Featurization</span></span>

<span data-ttu-id="75e86-239">Galera-tasaren eredua bezala, hoteleko zerbitzuaren bezeroaren IDa bezeroaren IDarekin batzen ari gara bezeroaren ID bakoitzeko etengabe gomendioak eraikitzeko.</span><span class="sxs-lookup"><span data-stu-id="75e86-239">Like the churn model, we are joining the hotel ServiceCustomerID with CustomerID in order to build recommendations consistently per CustomerID.</span></span>

![Gomendio ereduaren ezaugarri](media/azure-machine-learning-model-featurization.png)

<span data-ttu-id="75e86-241">Datuak hiru entitate desberdinetatik jasotzen dira eta ezaugarri horietatik eratorritakoak dira.</span><span class="sxs-lookup"><span data-stu-id="75e86-241">The data is sourced from three different entities and features are derived from them.</span></span> <span data-ttu-id="75e86-242">Gomendioaren arazoaren ezaugarri nagusia ezberdina da Churn edo CLTV eszenatokiekin alderatuta.</span><span class="sxs-lookup"><span data-stu-id="75e86-242">The featurization for the problem of recommendation is different compared to churn or CLTV scenarios.</span></span> <span data-ttu-id="75e86-243">Gomendio ereduak sarrera datuak behar ditu hiru funtzio multzoren moduan.</span><span class="sxs-lookup"><span data-stu-id="75e86-243">The recommendation model needs input data in the form of three sets of features.</span></span>

### <a name="model-selection"></a><span data-ttu-id="75e86-244">Ereduen hautapena</span><span class="sxs-lookup"><span data-stu-id="75e86-244">Model selection</span></span>

<span data-ttu-id="75e86-245">Produktuak edo zerbitzuak iragartzen ditugu **Train Matchbox Recommender** algoritmoa erabili eta eredua trebatzeko.</span><span class="sxs-lookup"><span data-stu-id="75e86-245">We predict products or services by using the algorithm called **Train Matchbox Recommender** to train the recommendation model.</span></span>

![Produktuen gomendioa algoritmoa](media/azure-machine-learning-model-recommendation-algorithm.png)

<span data-ttu-id="75e86-247">**Train Matchbox Recommender** ereduak prestakuntza zerbitzuaren erabilera datuetan, bezeroaren deskribapenean (aukerakoa) eta zerbitzuaren deskribapenean hartzen dituen hiru sarrerako portuak.</span><span class="sxs-lookup"><span data-stu-id="75e86-247">The three input ports for the **Train Matchbox Recommender** model takes in the training service usage data, customer description (optional), and service description.</span></span> <span data-ttu-id="75e86-248">Eredua puntuatzeko hiru modu desberdin daude.</span><span class="sxs-lookup"><span data-stu-id="75e86-248">There are three different ways of scoring the model.</span></span> <span data-ttu-id="75e86-249">Bata eredua ebaluaziorako da, non normalizatutako zenbateko irabazia metatutako puntuazioa (NDCG) puntuazioa kalkulatzen den puntuatutako elementuak sailkatzeko.</span><span class="sxs-lookup"><span data-stu-id="75e86-249">One is for model evaluation where a Normalized Discounted Cumulative Gain (NDCG) score is calculated to rank the rated items.</span></span> <span data-ttu-id="75e86-250">Esperimentu honetan, NDCG puntuazioa 0.97 da.</span><span class="sxs-lookup"><span data-stu-id="75e86-250">In this experiment, we have the NDCG score as 0.97.</span></span> <span data-ttu-id="75e86-251">Beste bi aukerak eredua puntuatzea da zerbitzuen katalogo gomendagarrian, edo erabiltzaileek aurretik erabili ez dituzten elementuetan soilik puntuatzea.</span><span class="sxs-lookup"><span data-stu-id="75e86-251">The other two options are scoring the model on the entire recommendable service catalog, or scoring only on items that users have not used before.</span></span>

<span data-ttu-id="75e86-252">Zerbitzuen katalogo osorako gomendioen banaketari buruz gehiago begiratuz, telefonoa, WiFi-a eta mezularitza-zerbitzua gomendagarriak diren zerbitzu nagusiak direla ohartzen gara.</span><span class="sxs-lookup"><span data-stu-id="75e86-252">Looking further on the distributions of the recommendations on the entire service catalog, we notice that phone, WiFi, and courier are the top services to be recommended.</span></span> <span data-ttu-id="75e86-253">Hau bat dator zerbitzuaren kontsumoaren datuen banaketetatik topatu duguna:</span><span class="sxs-lookup"><span data-stu-id="75e86-253">This is consistent with what we found from the distributions of the service consumption data:</span></span>

![Gomendio-ereduaren irteerakoa](media/azure-machine-learning-model-output.png)

<span data-ttu-id="75e86-255">[Produktuaren gomendio-esperimentua osoa Azure AI galerian atzi daiteke.](https://gallery.azure.ai/Experiment/Recommendation-4)</span><span class="sxs-lookup"><span data-stu-id="75e86-255">The entire [product recommendation experiment can be accessed in Azure AI Gallery.](https://gallery.azure.ai/Experiment/Recommendation-4)</span></span>

## <a name="integrate-custom-models"></a><span data-ttu-id="75e86-256">Integratu pertsonalizatutako ereduak</span><span class="sxs-lookup"><span data-stu-id="75e86-256">Integrate custom models</span></span>

<span data-ttu-id="75e86-257">Aurreikuspen hauek Customer Insights-en erabiltzeko, beharrezkoa da iragarpenak **esportatzea** bezeroaren IDekin batera.</span><span class="sxs-lookup"><span data-stu-id="75e86-257">To use these predictions in Customer Insights, you need to **export** the predictions along with the customer IDs.</span></span> <span data-ttu-id="75e86-258">[Esportatu Azure Blob biltegiratze kokapenera](https://docs.microsoft.com/azure/storage/common/storage-import-export-data-from-blobs), iturburuko datuak esportatzen dituzun leku berera.</span><span class="sxs-lookup"><span data-stu-id="75e86-258">[Export them to the same Azure Blob storage location](https://docs.microsoft.com/azure/storage/common/storage-import-export-data-from-blobs) that you export the source data to.</span></span> <span data-ttu-id="75e86-259">Aurreikusitako web zerbitzua aldizka exekutatu daiteke eta puntuazioak eguneratzeko.</span><span class="sxs-lookup"><span data-stu-id="75e86-259">The predictive web service can be scheduled to run regularly and update the scores.</span></span>

<span data-ttu-id="75e86-260">Eredu pertsonalizatuak sortutako datuak zure bezeroen datuak gehiago aberasteko erabil daitezke.</span><span class="sxs-lookup"><span data-stu-id="75e86-260">Data generated by the custom model can be used to further enrich your customer data.</span></span> <span data-ttu-id="75e86-261">Informazio gehiago lortzeko, ikus [Ikaskuntza automatiko eredu pertsonalizatuak](custom-models.md).</span><span class="sxs-lookup"><span data-stu-id="75e86-261">For more information, see [Custom machine learning models](custom-models.md).</span></span>
